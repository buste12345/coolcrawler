{% extends "AdminLTE/starter.html" %}

{% block page_header %}
        <section class="content-header">
          <h1>
          Spiders
          </h1>
          <ol class="breadcrumb">
            <li><a href="/welcome/home/"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Spider status</li>
          </ol>
        </section>
{% endblock %}

{% block content %}
        <!-- Main content -->
        <section class="content">



      <div class="row">
            <div class="col-xs-12">
              <div class="box">

                <div class="box-body">
                  <table id="webss" class="table table-bordered table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Start time</th></th>
                        <th>Spider</th>
                        <th>Crawled items</th>
                        <th>Status</th>
                        <th>Action</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                                        {% for res in result.running %}
                      <tr>
                        <td><a href="{% url 'statusweb' slug=res.id %}">{{ res.id }}</a></td>
                        <td>{{ res.start_time }}</td>
                        <td>{{ res.spider }}</td>
                        <td><a href="{% url 'stato' slug=res.id %}">{{res.count}}</a></td>
                        <th>Running</th>
                                               <th>
<form action="#" method="POST">{% csrf_token %}
 <button type="submit" name="runspider" value="{{res.id}}">Stop</button>
</form></th>
                      </tr>
        
                    {% endfor %}
                                                            {% for res in result.pending %}
                      <tr>
                        <td><a href="{% url 'statusweb' slug=res.id %}">{{ res.end_time }}</a></td>
                        <td>{{ res.start_time }}</td>
                        <td>{{ res.spider }}</td>
                        <td>None</td>
                        <th>Pending</th>
                         <th>
                        Starting...</th>
                      </tr>
        
                    {% endfor %}
                    {% for res in result.finished %}
                      <tr>
                        <td><a href="{% url 'statusweb' slug=res.id %}">{{ res.id }}</a></td>
                        <td>{{ res.start_time }}</td>
                        <td>{{ res.spider }}</td>
                        <td><a href="{% url 'stato' slug=res.id %}">{{res.count}}</a></td>
                        <th>Finished</th>
<th></th>
                      </tr>
        
                    {% endfor %}


                            </tbody>
                    <tfoot>
                      <tr>
                        <th>ID</th>
                        <th>Start time</th></th>
                        <th>Spider</th>
                        <th>Crawled items</th>
                        <th>Status</th>
                         <th>Action</th>
                         
                      </tr>
                    </tfoot>
                  </table>
                </div><!-- /.box-body -->
              </div><!-- /.box -->

            </div><!-- /.col -->
          </div><!-- /.row -->
      
      
     
          
        </section><!-- /.content -->
{% endblock %}

